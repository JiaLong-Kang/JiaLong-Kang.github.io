<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="arB0oQZ5Q_2XiRgbMUG2pJOod1NKEmWD9E2-BfBA0Eo">
  <meta name="baidu-site-verification" content="codeva-HfmgMGHhUU">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.kjlcloud.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.22.0","exturl":true,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"giscus","storage":true,"lazyload":true,"nav":null,"activeClass":"giscus"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å‰è¨€ï¼šä¹‹å‰åœ¨å·¥ä½œä¸­ç®€å•ç”¨è¿‡gtestï¼Œä½†å½“æ—¶é¡¹ç›®æ¯”è¾ƒèµ¶æ—¶é—´ï¼Œå¯¹æµ‹è¯•å¹¶ä¸æ˜¯å¾ˆé‡è§†ã€‚ç»å¸¸å‡ºç°ä¸€ä¸ªäººæ”¹å®Œä»£ç åï¼Œæ¨¡å—ä¹‹é—´å‡ºç°bugæƒ…å†µï¼Œç„¶åèŠ±å¾ˆé•¿æ—¶é—´æ’æŸ¥bugã€‚å¸å–æ•™è®­åå‡†å¤‡åœ¨æ–°é¡¹ç›®ä¸­å¼•å…¥gtestï¼ŒèŠ±äº†ä¸¤å¤©æ—¶é—´å­¦ä¹ äº†gtestæ–‡æ¡£ï¼Œå‘ç°å®ƒåŠŸèƒ½è¿˜æ˜¯è›®å¤šçš„ã€‚å‡†å¤‡æ•´ç†ä¸€ä¸ªgtestç³»åˆ—çš„ä¸“æ ï¼Œä¹Ÿæ˜¯æ£€éªŒè‡ªå·±å­¦ä¹ æˆæœã€‚ ä¸€ã€ gtestå¿«é€Ÿå…¥é—¨1.1 gtestæ˜¯ä»€ä¹ˆgtest æ˜¯ Google Test çš„">
<meta property="og:type" content="article">
<meta property="og:title" content="gtest å¿«é€Ÿå…¥é—¨">
<meta property="og:url" content="https://blog.kjlcloud.com/gtest-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html">
<meta property="og:site_name" content="å››å­£">
<meta property="og:description" content="å‰è¨€ï¼šä¹‹å‰åœ¨å·¥ä½œä¸­ç®€å•ç”¨è¿‡gtestï¼Œä½†å½“æ—¶é¡¹ç›®æ¯”è¾ƒèµ¶æ—¶é—´ï¼Œå¯¹æµ‹è¯•å¹¶ä¸æ˜¯å¾ˆé‡è§†ã€‚ç»å¸¸å‡ºç°ä¸€ä¸ªäººæ”¹å®Œä»£ç åï¼Œæ¨¡å—ä¹‹é—´å‡ºç°bugæƒ…å†µï¼Œç„¶åèŠ±å¾ˆé•¿æ—¶é—´æ’æŸ¥bugã€‚å¸å–æ•™è®­åå‡†å¤‡åœ¨æ–°é¡¹ç›®ä¸­å¼•å…¥gtestï¼ŒèŠ±äº†ä¸¤å¤©æ—¶é—´å­¦ä¹ äº†gtestæ–‡æ¡£ï¼Œå‘ç°å®ƒåŠŸèƒ½è¿˜æ˜¯è›®å¤šçš„ã€‚å‡†å¤‡æ•´ç†ä¸€ä¸ªgtestç³»åˆ—çš„ä¸“æ ï¼Œä¹Ÿæ˜¯æ£€éªŒè‡ªå·±å­¦ä¹ æˆæœã€‚ ä¸€ã€ gtestå¿«é€Ÿå…¥é—¨1.1 gtestæ˜¯ä»€ä¹ˆgtest æ˜¯ Google Test çš„">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-02-20T10:00:00.000Z">
<meta property="article:modified_time" content="2025-02-20T10:00:00.000Z">
<meta property="article:author" content="JiaLong Kang">
<meta property="article:tag" content="gtest">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.kjlcloud.com/gtest-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://blog.kjlcloud.com/gtest-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html","path":"gtest-å¿«é€Ÿå…¥é—¨.html","title":"gtest å¿«é€Ÿå…¥é—¨"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>gtest å¿«é€Ÿå…¥é—¨ | å››å­£</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="å››å­£" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">å››å­£</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Seasons</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">30</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">11</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">46</span></a></li><li class="menu-item menu-item-guestbook"><a href="/guestbook/" rel="section"><i class="fa fa-book fa-fw"></i>Guestbook</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81-gtest%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="nav-text">ä¸€ã€ gtestå¿«é€Ÿå…¥é—¨</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-gtest%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-text">1.1 gtestæ˜¯ä»€ä¹ˆ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E6%9E%84%E5%BB%BA%E4%B8%80%E4%B8%AAgtest%E9%A1%B9%E7%9B%AE"><span class="nav-text">1.2 æ„å»ºä¸€ä¸ªgtesté¡¹ç›®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-gtest%E5%85%A5%E9%97%A8"><span class="nav-text">1.3 gtestå…¥é—¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">1.3.1 åŸºæœ¬æ¦‚å¿µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-2-TEST"><span class="nav-text">1.3.2 TEST</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-3-TEST-F"><span class="nav-text">1.3.3 TEST_F</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-4-%E7%BC%96%E5%86%99main%E5%87%BD%E6%95%B0"><span class="nav-text">1.3.4 ç¼–å†™mainå‡½æ•°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-5-%E6%96%AD%E8%A8%80%E5%8F%82%E8%80%83"><span class="nav-text">1.3.5 æ–­è¨€å‚è€ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-1-%E5%B8%83%E5%B0%94"><span class="nav-text">1.3.5.1 å¸ƒå°”</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-2-%E6%95%B4%E6%95%B0%E3%80%81%E6%8C%87%E9%92%88%E3%80%81string"><span class="nav-text">1.3.5.2 æ•´æ•°ã€æŒ‡é’ˆã€string</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-3-C-%E9%A3%8E%E6%A0%BC%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-text">1.3.5.3 C é£æ ¼å­—ç¬¦ä¸²</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-4-%E6%B5%AE%E7%82%B9"><span class="nav-text">1.3.5.4 æµ®ç‚¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-5-%E5%BC%82%E5%B8%B8"><span class="nav-text">1.3.5.5 å¼‚å¸¸</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-6-%E8%B0%93%E8%AF%8D"><span class="nav-text">1.3.5.6 è°“è¯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-7-%E6%98%BE%E5%BC%8F%E7%9A%84%E6%88%90%E5%8A%9F%E5%92%8C%E5%A4%B1%E8%B4%A5"><span class="nav-text">1.3.5.7 æ˜¾å¼çš„æˆåŠŸå’Œå¤±è´¥</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-8-%E5%8C%B9%E9%85%8D%E5%99%A8"><span class="nav-text">1.3.5.8 åŒ¹é…å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-9-Windows-HRESULT"><span class="nav-text">1.3.5.9 Windows HRESULT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-5-10-%E6%AD%BB%E4%BA%A1%E6%96%AD%E8%A8%80"><span class="nav-text">1.3.5.10 æ­»äº¡æ–­è¨€</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-text">å‚è€ƒ</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="JiaLong Kang"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">JiaLong Kang</p>
  <div class="site-description" itemprop="description">å’Œä½ å†å¹²ä¸€æ¯ï¼Œå²å²å’Œå¹´å¹´ğŸ»</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">46</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0ppYUxvbmctS2FuZw==" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;JiaLong-Kang"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOmtqaWFsb25nQDE2My5jb20=" title="E-Mail â†’ mailto:kjialong@163.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          Links
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <span class="exturl" data-url="aHR0cHM6Ly9jb29sc2hlbGwuY24=" title="https:&#x2F;&#x2F;coolshell.cn">å·¦è€³æœµè€—å­</span>
            </li>
        </ul>
      </div>
    </div>
        <div class="pjax">
        <div class="sidebar-inner sidebar-post-related">
          <div class="animated">
              <div class="links-of-blogroll-title"><i class="fa fa-signs-post fa-fw"></i>
    Related Posts
  </div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <a class="popular-posts-link" href="/C-C-%E5%9C%A8assert%E4%B8%AD%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8%E5%B8%A6%E6%9C%89%E5%89%AF%E4%BD%9C%E7%94%A8%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" rel="bookmark">
        <time class="popular-posts-time">2025-03-10</time>
        <br>
      C/C++ åœ¨assertä¸­ä¸è¦ä½¿ç”¨å¸¦æœ‰å‰¯ä½œç”¨çš„è¡¨è¾¾å¼
      </a>
    </li>
  </ul>

          </div>
        </div>
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.kjlcloud.com/gtest-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="JiaLong Kang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å››å­£">
      <meta itemprop="description" content="å’Œä½ å†å¹²ä¸€æ¯ï¼Œå²å²å’Œå¹´å¹´ğŸ»">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="gtest å¿«é€Ÿå…¥é—¨ | å››å­£">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          gtest å¿«é€Ÿå…¥é—¨
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-02-20 18:00:00" itemprop="dateCreated datePublished" datetime="2025-02-20T18:00:00+08:00">2025-02-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Google-Test/" itemprop="url" rel="index"><span itemprop="name">Google Test</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="firestore-visitors-count"></span>
    </span>
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>6k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>1:01</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>å‰è¨€ï¼šä¹‹å‰åœ¨å·¥ä½œä¸­ç®€å•ç”¨è¿‡gtestï¼Œä½†å½“æ—¶é¡¹ç›®æ¯”è¾ƒèµ¶æ—¶é—´ï¼Œå¯¹æµ‹è¯•å¹¶ä¸æ˜¯å¾ˆé‡è§†ã€‚ç»å¸¸å‡ºç°ä¸€ä¸ªäººæ”¹å®Œä»£ç åï¼Œæ¨¡å—ä¹‹é—´å‡ºç°bugæƒ…å†µï¼Œç„¶åèŠ±å¾ˆé•¿æ—¶é—´æ’æŸ¥bugã€‚å¸å–æ•™è®­åå‡†å¤‡åœ¨æ–°é¡¹ç›®ä¸­å¼•å…¥gtestï¼ŒèŠ±äº†ä¸¤å¤©æ—¶é—´å­¦ä¹ äº†gtestæ–‡æ¡£ï¼Œå‘ç°å®ƒåŠŸèƒ½è¿˜æ˜¯è›®å¤šçš„ã€‚å‡†å¤‡æ•´ç†ä¸€ä¸ªgtestç³»åˆ—çš„ä¸“æ ï¼Œä¹Ÿæ˜¯æ£€éªŒè‡ªå·±å­¦ä¹ æˆæœã€‚</p>
<h1 id="ä¸€ã€-gtestå¿«é€Ÿå…¥é—¨"><a href="#ä¸€ã€-gtestå¿«é€Ÿå…¥é—¨" class="headerlink" title="ä¸€ã€ gtestå¿«é€Ÿå…¥é—¨"></a>ä¸€ã€ gtestå¿«é€Ÿå…¥é—¨</h1><h2 id="1-1-gtestæ˜¯ä»€ä¹ˆ"><a href="#1-1-gtestæ˜¯ä»€ä¹ˆ" class="headerlink" title="1.1 gtestæ˜¯ä»€ä¹ˆ"></a>1.1 gtestæ˜¯ä»€ä¹ˆ</h2><p><code>gtest</code> æ˜¯ Google Test çš„ç®€ç§°ï¼Œæ˜¯ä¸€ä¸ªç”± Google å¼€å‘ä¸ç»´æŠ¤çš„ C++ æµ‹è¯•æ¡†æ¶ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„æ–­è¨€å’Œæµ‹è¯•å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…ç¼–å†™æ›´å¥½çš„ C++ æµ‹è¯•ä»£ç ã€‚</p>
<span id="more"></span>

<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸°å¯Œçš„æ–­è¨€ï¼šæ”¯æŒå¤šç§æ–­è¨€å®ï¼Œå¦‚ <code>EXPECT_TRUE</code>ã€<code>ASSERT_TRUE</code> ç­‰ï¼Œä¾¿äºéªŒè¯æµ‹è¯•ç»“æœã€‚</li>
<li>æ”¯æŒå¤šç§æµ‹è¯•ç»“æ„ï¼šä¾‹å¦‚<code>TEST</code>ã€<code>TEST_F</code> å’Œ <code>TEST_P</code>ç­‰ï¼Œä»¥æ»¡è¶³ä¸åŒçš„æµ‹è¯•åœºæ™¯ã€‚</li>
<li>è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼šå¯æŒ‡å®šç”Ÿæˆxmlã€jsonæ ¼å¼æµ‹è¯•æŠ¥å‘Š</li>
<li>è·¨å¹³å°ï¼šæ”¯æŒ Windowsã€Linuxã€macOS ç­‰å¤šä¸ªå¹³å°ã€‚</li>
<li>ä¸æ„å»ºç³»ç»Ÿé›†æˆï¼šå¯ä¸ CMakeã€Bazel ç­‰æ„å»ºå·¥å…·æ— ç¼é›†æˆã€‚</li>
</ul>
<h2 id="1-2-æ„å»ºä¸€ä¸ªgtesté¡¹ç›®"><a href="#1-2-æ„å»ºä¸€ä¸ªgtesté¡¹ç›®" class="headerlink" title="1.2 æ„å»ºä¸€ä¸ªgtesté¡¹ç›®"></a>1.2 æ„å»ºä¸€ä¸ªgtesté¡¹ç›®</h2><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä»githubä¸Šä¸‹è½½<code>gtest</code>ä½œä¸ºä¸€ä¸ªç‹¬ç«‹é¡¹ç›®æ¥å­¦ä¹ ï¼Œä¹Ÿå¯å°†<code>gtest</code>åˆå¹¶åˆ°ç°æœ‰çš„é¡¹ç›®ä¸­å»ã€‚</p>
<p><strong>å°†gtestä½œä¸ºç‹¬ç«‹é¡¹ç›®</strong></p>
<p><code>gtest</code>æœ¬èº«æä¾›äº†è®¸å¤šç¤ºä¾‹ä¾›æˆ‘ä»¬å­¦ä¹ ï¼Œç¤ºä¾‹ä»£ç ä½äº<code>googletest/samples</code>ç›®å½•ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/google/googletest.git <span class="comment"># ä¸‹è½½gtestæœ€æ–°ä»£ç </span></span><br><span class="line"><span class="built_in">cd</span> googletest </span><br><span class="line"><span class="built_in">mkdir</span> build <span class="comment"># åˆ›å»ºç¼–è¯‘ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake3 .. <span class="comment"># å¦‚æœæƒ³æ„å»ºè¿™äº›ç¤ºä¾‹ç¨‹åºï¼Œéœ€è¦åŠ ä¸Š -Dgtest_build_samples=ON</span></span><br><span class="line">make </span><br></pre></td></tr></table></figure>

<p><strong>æ•´åˆåˆ°ç°æœ‰çš„é¡¹ç›®ä¸­</strong></p>
<p>ä¿®æ”¹ç°æœ‰é¡¹ç›®çš„<code>CMakeLists.txt</code>æ–‡ä»¶ï¼Œå£°æ˜å¯¹<code>gtest</code> çš„ä¾èµ–å…³ç³»ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(FetchContent)</span><br><span class="line">FetchContent_Declare(</span><br><span class="line">        googletest</span><br><span class="line">        URL https://github.com/google/googletest/archive/refs/tags/release-<span class="number">1.10</span>.<span class="number">0</span>.zip</span><br><span class="line">)</span><br><span class="line"><span class="comment"># For Windows: Prevent overriding the parent project&#x27;s compiler/linker settings</span></span><br><span class="line"><span class="keyword">set</span>(gtest_force_shared_crt <span class="keyword">ON</span> CACHE BOOL <span class="string">&quot;&quot;</span> FORCE)</span><br><span class="line">FetchContent_MakeAvailable(googletest)</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°é…ç½®å£°æ˜äº†å¯¹ä» GitHub ä¸‹è½½çš„<code>gtest</code>ä¾èµ–ï¼Œ1.10.0è¡¨ç¤ºè¦ä¸‹è½½çš„<code>gtest</code>ç‰ˆæœ¬ï¼Œå› ä¸ºæˆ‘ç³»ç»Ÿä¸Š<code>gcc</code>ç¼–è¯‘å™¨æ¯”è¾ƒè€ï¼Œä¸æ”¯æŒc++ 14ï¼Œæ‰€ä»¥æˆ‘ä¸‹çš„<code>gtest</code>ç‰ˆæœ¬è¾ƒä½ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªèº«ç¯å¢ƒä¸‹è½½åˆé€‚ç‰ˆæœ¬ã€‚</p>
<p>å°† <code>gtest</code> å£°æ˜ä¸ºä¾èµ–é¡¹åï¼Œä¾¿å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­ä½¿ç”¨<code>gtest</code>äº†ã€‚ä¾‹å¦‚åˆ›å»ºä¸€ä¸ª<code>hello_test.cc</code>çš„æ–‡ä»¶ï¼Œæµ‹è¯•è®¡ç®—é˜¶ä¹˜çš„å‡½æ•°æ˜¯å¦æ­£ç¡®ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Factorial</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> result = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		result *= i;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(FactorialTest, Negative)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">EXPECT_EQ</span>(<span class="number">1</span>, <span class="built_in">Factorial</span>(<span class="number">-5</span>)); <span class="comment">// æµ‹è¯•-5çš„é˜¶ä¹˜æ˜¯å¦ç­‰äº1</span></span><br><span class="line">	<span class="built_in">EXPECT_EQ</span>(<span class="number">1</span>, <span class="built_in">Factorial</span>(<span class="number">-1</span>)); <span class="comment">// æµ‹è¯•-1çš„é˜¶ä¹˜æ˜¯å¦ç­‰äº1</span></span><br><span class="line">	<span class="built_in">EXPECT_GT</span>(<span class="built_in">Factorial</span>(<span class="number">-10</span>), <span class="number">0</span>); <span class="comment">// æµ‹è¯•-10çš„é˜¶ä¹˜æ˜¯å¦å¤§äº0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>gtest</code>æä¾›äº†<span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3QvcHJpbWVyLmh0bWwjYXNzZXJ0aW9ucw==">ä¸€äº›æ–­è¨€<i class="fa fa-external-link-alt"></i></span>ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥æµ‹è¯•ä»£ç çš„è¡Œä¸ºã€‚ä¸Šé¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€äº›åŸºæœ¬æ–­è¨€ï¼Œåé¢å°†ä¼šè¯¦ç»†è®²è§£è¿™äº›æ–­è¨€çš„åŠŸèƒ½ã€‚</p>
<p>å¯ä»¥å‘ç°ä¸Šè¿°æµ‹è¯•ä»£ç ä¸­æ²¡æœ‰<code>main</code>å‡½æ•°ï¼Œé‚£ä¹ˆæ€ä¹ˆç¼–è¯‘è¿è¡Œå‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦é“¾æ¥<code>gtest-main</code>åº“ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ <code>main</code> å‡½æ•°å®ç°ï¼Œç”¨äºè¿è¡Œæ‰€æœ‰çš„æµ‹è¯•ã€‚</p>
<p>è¦ç¼–è¯‘æµ‹è¯•ç¨‹åºï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°<code>CMakeLists.txt</code>ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(</span><br><span class="line">        hello_test</span><br><span class="line">        hello_test.cpp</span><br><span class="line">)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(</span><br><span class="line">        hello_test</span><br><span class="line">        gtest_main</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¿è¡Œæµ‹è¯•ç¨‹åºçœ‹ä¸‹æ•ˆæœå§ï¼Œå¯ä»¥çœ‹åˆ°è¿è¡ŒæˆåŠŸï¼Œæ‰€ä»¥æ–­è¨€éƒ½é€šè¿‡äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[user1@develop tests]$ ./hello_test</span><br><span class="line">Running main() from xxx</span><br><span class="line">[==========] Running 1 <span class="built_in">test</span> from 1 <span class="built_in">test</span> suite.</span><br><span class="line">[----------] Global <span class="built_in">test</span> environment set-up.</span><br><span class="line">[----------] 1 <span class="built_in">test</span> from FactorialTest</span><br><span class="line">[ RUN      ] FactorialTest.Negative</span><br><span class="line">[       OK ] FactorialTest.Negative (0 ms)</span><br><span class="line">[----------] 1 <span class="built_in">test</span> from FactorialTest (0 ms total)</span><br><span class="line"></span><br><span class="line">[----------] Global <span class="built_in">test</span> environment tear-down</span><br><span class="line">[==========] 1 <span class="built_in">test</span> from 1 <span class="built_in">test</span> suite ran. (0 ms total)</span><br><span class="line">[  PASSED  ] 1 <span class="built_in">test</span>.</span><br></pre></td></tr></table></figure>

<h2 id="1-3-gtestå…¥é—¨"><a href="#1-3-gtestå…¥é—¨" class="headerlink" title="1.3 gtestå…¥é—¨"></a>1.3 gtestå…¥é—¨</h2><h3 id="1-3-1-åŸºæœ¬æ¦‚å¿µ"><a href="#1-3-1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.3.1 åŸºæœ¬æ¦‚å¿µ"></a>1.3.1 åŸºæœ¬æ¦‚å¿µ</h3><p><code>gtest</code>ä½¿ç”¨æ–­è¨€ï¼ˆAssertionï¼‰æ¥æ£€æŸ¥æŸäº›æ¡ä»¶æ˜¯å¦ä¸ºçœŸï¼Œä»¥æ­¤éªŒè¯ä»£ç çš„è¡Œä¸ºï¼Œå¯ä»¥è®¤ä¸ºæ–­è¨€å°±æ˜¯ä¸€ä¸ªæ£€æŸ¥ç‚¹ã€‚**æ–­è¨€çš„ç»“æœæœ‰æˆåŠŸã€ éè‡´å‘½å¤±è´¥å’Œè‡´å‘½å¤±è´¥ä¸‰ç§ã€‚**å½“æ–­è¨€å¤±è´¥æ—¶ï¼Œä¼šæ‰“å°æ–­è¨€æ‰€å¤„çš„æ–‡ä»¶åä¸è¡Œå·ï¼Œä»¥ä¾¿æˆ‘ä»¬å¿«é€Ÿå®šä½é”™è¯¯ä½ç½®ã€‚</p>
<p>åœ¨<code>gtest</code>ä¸­ï¼Œæ–­è¨€ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼Œ<strong><code>ASSERT_*</code>ç‰ˆæœ¬å¤±è´¥æ—¶ä¼šäº§ç”Ÿè‡´å‘½å¤±è´¥ï¼Œå¹¶ä¸­æ­¢å½“å‰å‡½æ•°ã€‚<code>EXPECT_*</code>ç‰ˆæœ¬ä¼šäº§ç”Ÿéè‡´å‘½å¤±è´¥ï¼Œä¸ä¼šä¸­æ­¢å½“å‰å‡½æ•°</strong>ã€‚é€šå¸¸<code>EXPECT_*</code>æ˜¯é¦–é€‰ï¼Œå› ä¸ºå®ƒä»¬å…è®¸åœ¨æµ‹è¯•ä¸­æŠ¥å‘Šå¤šä¸ªé”™è¯¯ã€‚å¦‚æœåœ¨æŸä¸ªæ–­è¨€å¤±è´¥åï¼Œåç»­æµ‹è¯•ä»£ç ç»§ç»­è¿è¡Œæ²¡æœ‰ä»»ä½•æ„ä¹‰åˆ™åº”ä½¿ç”¨<code>ASSERT_*</code>ã€‚</p>
<p>å¯ä»¥é€šè¿‡ <code>&lt;&lt;</code> è¿ç®—ç¬¦å‘æ–­è¨€ä¸­æ·»åŠ è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯ï¼Œå½“æ–­è¨€å¤±è´¥æ—¶ï¼Œè¿™äº›ä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨æµ‹è¯•è¾“å‡ºä¸­ï¼Œå¸®åŠ©å¿«é€Ÿå®šä½é—®é¢˜ã€‚ä»»ä½•å¯ä»¥æµå¼ä¼ è¾“åˆ°<code>ostream</code>çš„å†…å®¹éƒ½å¯ä»¥æµå¼ä¼ å…¥åˆ°æ–­è¨€ä¸­â€”â€”ç‰¹åˆ«æ˜¯Cé£æ ¼å­—ç¬¦ä¸²å’ŒC++ stringå¯¹è±¡ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ASSERT_EQ</span>(x.<span class="built_in">size</span>(), y.<span class="built_in">size</span>()) &lt;&lt; <span class="string">&quot;Vectors x and y are of unequal length&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; x.<span class="built_in">size</span>(); ++i) </span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">EXPECT_EQ</span>(x[i], y[i]) &lt;&lt; <span class="string">&quot;Vectors x and y differ at index &quot;</span> &lt;&lt; i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸€ä¸ªæµ‹è¯•ç¨‹åºå¯ä»¥åŒ…å«å¤šä¸ªæµ‹è¯•å¥—ä»¶ï¼ˆtest suiteï¼‰ï¼Œä¸€ä¸ªæµ‹è¯•å¥—ä»¶åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæµ‹è¯•</strong>ã€‚åº”è¯¥å°†æµ‹è¯•åˆ†ç»„åˆ°èƒ½å¤Ÿåæ˜ æµ‹è¯•ä»£ç ç»“æ„çš„æµ‹è¯•å¥—ä»¶ä¸­ã€‚<strong>æµ‹è¯•ä½¿ç”¨æ–­è¨€æ¥éªŒè¯æµ‹è¯•ä»£ç çš„è¡Œä¸º</strong>ï¼Œå¦‚æœæµ‹è¯•å´©æºƒæˆ–æ–­è¨€å¤±è´¥ï¼ˆä¸ç®¡æ˜¯å¦ä¸ºè‡´å‘½å¤±è´¥ï¼‰ï¼Œåˆ™è®¤ä¸ºè¯¥æµ‹è¯•å¤±è´¥ï¼›å¦åˆ™è®¤ä¸ºæµ‹è¯•æˆåŠŸã€‚</p>
<blockquote>
<p>å·²çŸ¥é™åˆ¶ï¼š<code>gtest</code>çš„è®¾è®¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚åœ¨<code>pthread</code>åº“å¯ç”¨çš„ç³»ç»Ÿä¸Šï¼Œå®ç°æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ç›®å‰ï¼Œåœ¨å…¶ä»–ç³»ç»Ÿï¼ˆä¾‹å¦‚Windowsï¼‰ä¸Šä»ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘åœ°ä½¿ç”¨<code>gtest</code>æ–­è¨€æ˜¯ä¸å®‰å…¨çš„ã€‚åœ¨å¤§å¤šæ•°æµ‹è¯•ä¸­ï¼Œè¿™ä¸æ˜¯é—®é¢˜ï¼Œå› ä¸ºæ–­è¨€é€šå¸¸åœ¨ä¸»çº¿ç¨‹ä¸­å®Œæˆã€‚å¦‚æœæ‚¨æƒ³æä¾›å¸®åŠ©ï¼Œæ‚¨å¯ä»¥è‡ªæ„¿ä¸ºæ‚¨çš„å¹³å°å®ç°<code>gtest-port.h</code>ä¸­å¿…è¦çš„åŒæ­¥åŸè¯­ã€‚</p>
</blockquote>
<h3 id="1-3-2-TEST"><a href="#1-3-2-TEST" class="headerlink" title="1.3.2 TEST"></a>1.3.2 TEST</h3><p><code>TEST</code>æ˜¯ä¸€ä¸ªå®ï¼Œç”¨äºå®šä¹‰<strong>æµ‹è¯•å¥—ä»¶ï¼ˆTest Suiteï¼‰<strong>ç›¸å…³çš„æµ‹è¯•ã€‚ <code>TEST</code>å®æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯</strong>æµ‹è¯•å¥—ä»¶çš„åç§°</strong>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>æµ‹è¯•åç§°</strong>ï¼Œä¸¤ä¸ªåç§°éƒ½å¿…é¡»æ˜¯æœ‰æ•ˆçš„ C++ æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”<strong>ä¸åº”åŒ…å«ä»»ä½•ä¸‹åˆ’çº¿å­—ç¬¦</strong>ã€‚æµ‹è¯•çš„å…¨åç”±æµ‹è¯•å¥—ä»¶+æµ‹è¯•åç»„æˆã€‚æ¥è‡ªä¸åŒæµ‹è¯•å¥—ä»¶çš„æµ‹è¯•åå¯ä»¥ç›¸åŒã€‚</p>
<p>è¦åˆ›å»ºæµ‹è¯•ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>TEST</code>å®å®šä¹‰å¹¶å‘½åæµ‹è¯•å‡½æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰è¿”å›å€¼çš„ C++ å‡½æ•°ã€‚</li>
<li>åœ¨æ­¤å‡½æ•°ä¸­ï¼Œé™¤äº†æ‚¨æƒ³è¦åŒ…å«çš„ä»»ä½•æœ‰æ•ˆ C++ è¯­å¥å¤–ï¼Œè¿˜ä½¿ç”¨<code>gtest</code>æä¾›çš„å„ç§æ–­è¨€æ¥æ£€æŸ¥æ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚</li>
<li>æµ‹è¯•ç»“æœç”±æ–­è¨€å†³å®šï¼›å¦‚æœæµ‹è¯•ä¸­çš„ä»»ä½•æ–­è¨€å¤±è´¥ï¼ˆæ— è®ºæ˜¯è‡´å‘½çš„è¿˜æ˜¯éè‡´å‘½çš„ï¼‰ï¼Œæˆ–è€…æµ‹è¯•å´©æºƒï¼Œåˆ™æ•´ä¸ªæµ‹è¯•å¤±è´¥ã€‚å¦åˆ™ï¼Œæµ‹è¯•æˆåŠŸã€‚</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">TEST</span>(TestSuiteName, TestName) </span><br><span class="line">&#123;</span><br><span class="line">  ... test body ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡ç®—é˜¶ä¹˜çš„å‡½æ•°ï¼Œæ­¤åŠŸèƒ½çš„æµ‹è¯•å¥—ä»¶å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Factorial</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> result = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		result *= i;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(FactorialTest, HandlesEvenInput)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">EXPECT_EQ</span>(<span class="built_in">Factorial</span>(<span class="number">2</span>), <span class="number">2</span>);</span><br><span class="line">	<span class="built_in">EXPECT_EQ</span>(<span class="built_in">Factorial</span>(<span class="number">4</span>), <span class="number">23</span>); <span class="comment">// 4çš„é˜¶ä¹˜ä¸º24ï¼Œä½¿ç”¨EXPECT_EQï¼Œéè‡´å‘½å¤±è´¥ï¼Œè¯¥æµ‹è¯•åç»­ä»£ç ç»§ç»­è¿è¡Œ</span></span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;t1&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="built_in">EXPECT_EQ</span>(<span class="built_in">Factorial</span>(<span class="number">6</span>), <span class="number">720</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Tests factorial of positive numbers.</span></span><br><span class="line"><span class="built_in">TEST</span>(FactorialTest, HandlesOddInput)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">ASSERT_EQ</span>(<span class="built_in">Factorial</span>(<span class="number">1</span>), <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">ASSERT_EQ</span>(<span class="built_in">Factorial</span>(<span class="number">3</span>), <span class="number">5</span>); <span class="comment">// 3çš„é˜¶ä¹˜ä¸º6ï¼Œä½¿ç”¨ASSERT_EQï¼Œè‡´å‘½å¤±è´¥ï¼Œè¯¥æµ‹è¯•åç»­ä»£ç ä¸ä¼šè¿è¡Œ</span></span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;t2&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	<span class="built_in">ASSERT_EQ</span>(<span class="built_in">Factorial</span>(<span class="number">5</span>), <span class="number">120</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>gtest</code>æŒ‰æµ‹è¯•å¥—ä»¶å¯¹æµ‹è¯•ç»“æœè¿›è¡Œåˆ†ç»„ï¼Œå› æ­¤é€»è¾‘ä¸Šç›¸å…³çš„æµ‹è¯•åº”è¯¥åœ¨åŒä¸€ä¸ªæµ‹è¯•å¥—ä»¶ä¸­ï¼›æ¢å¥è¯è¯´ï¼Œå®ƒä»¬åœ¨<code>TEST</code>å®ä¸­ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥ç›¸åŒã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæµ‹è¯•ï¼Œ <code>HandlesZeroInput</code>å’Œ<code>HandlesPositiveInput</code>ï¼Œå®ƒä»¬å±äºåŒä¸€ä¸ªæµ‹è¯•<code>FactorialTest</code>ã€‚</p>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[user1@develop tests]$ ./hello_test </span><br><span class="line">Running main() from xxx</span><br><span class="line">[==========] Running 2 tests from 1 <span class="built_in">test</span> suite.</span><br><span class="line">[----------] Global <span class="built_in">test</span> environment set-up.</span><br><span class="line">[----------] 2 tests from FactorialTest</span><br><span class="line">[ RUN      ] FactorialTest.HandlesEvenInput</span><br><span class="line">/xxx/hello_test.cpp:18: Failure</span><br><span class="line">Expected equality of these values:</span><br><span class="line">  Factorial(4)</span><br><span class="line">    Which is: 24</span><br><span class="line">  23</span><br><span class="line">t1</span><br><span class="line">[  FAILED  ] FactorialTest.HandlesEvenInput (0 ms)</span><br><span class="line">[ RUN      ] FactorialTest.HandlesOddInput</span><br><span class="line">/xxx/hello_test.cpp:27: Failure</span><br><span class="line">Expected equality of these values:</span><br><span class="line">  Factorial(3)</span><br><span class="line">    Which is: 6</span><br><span class="line">  5</span><br><span class="line">[  FAILED  ] FactorialTest.HandlesOddInput (0 ms)</span><br><span class="line">[----------] 2 tests from FactorialTest (0 ms total)</span><br><span class="line"></span><br><span class="line">[----------] Global <span class="built_in">test</span> environment tear-down</span><br><span class="line">[==========] 2 tests from 1 <span class="built_in">test</span> suite ran. (0 ms total)</span><br><span class="line">[  PASSED  ] 0 tests.</span><br><span class="line">[  FAILED  ] 2 tests, listed below:</span><br><span class="line">[  FAILED  ] FactorialTest.HandlesEvenInput</span><br><span class="line">[  FAILED  ] FactorialTest.HandlesOddInput</span><br><span class="line"></span><br><span class="line"> 2 FAILED TESTS</span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-TEST-F"><a href="#1-3-3-TEST-F" class="headerlink" title="1.3.3 TEST_F"></a>1.3.3 TEST_F</h3><p><code>TEST_F</code>æ˜¯ä¸€ä¸ªå®ï¼Œç”¨äºå®šä¹‰<strong>æµ‹è¯•å¤¹å…·ï¼ˆTest Fixtureï¼‰<strong>ç›¸å…³çš„æµ‹è¯•ã€‚å®ƒæ˜¯ <code>TEST</code> å®çš„æ‰©å±•ï¼ˆ<code>_F</code>ä»£è¡¨â€œFixtureâ€ï¼‰ï¼Œå…è®¸åœ¨åŒä¸€æµ‹è¯•å¤¹å…·çš„å¤šä¸ªæµ‹è¯•ä¹‹é—´å…±äº«ç›¸åŒçš„é…ç½®å’Œèµ„æºã€‚ä½¿ç”¨ <code>TEST_F</code> å¯ä»¥é¿å…é‡å¤ä»£ç ï¼Œå¹¶ç¡®ä¿æµ‹è¯•ç¯å¢ƒçš„ä¸€è‡´æ€§ã€‚<code>TEST</code>å®æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯</strong>æµ‹è¯•å¤¹å…·çš„åç§°</strong>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>æµ‹è¯•åç§°</strong>ï¼Œä¸¤ä¸ªåç§°éƒ½å¿…é¡»æ˜¯æœ‰æ•ˆçš„ C++ æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”<strong>ä¸åº”åŒ…å«ä»»ä½•ä¸‹åˆ’çº¿å­—ç¬¦</strong>ã€‚</p>
<p>è¦åˆ›å»ºå¤¹å…·ï¼š</p>
<ol>
<li>å®šä¹‰ä¸€ä¸ªæµ‹è¯•å¤¹å…·ç±»ï¼Œå®ƒå¿…é¡»ç»§æ‰¿<code>testing::Test</code>ç±»</li>
<li>åœ¨å¤¹å…·ç±»å†…éƒ¨ï¼Œå£°æ˜æ‚¨è®¡åˆ’ä½¿ç”¨çš„ä»»ä½•èµ„æºã€‚</li>
<li>å¦‚æœæœ‰å¿…è¦ï¼Œç¼–å†™ä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°æˆ–override <code>SetUp</code>å‡½æ•°åˆå§‹åŒ–èµ„æºã€‚</li>
<li>å¦‚æœéœ€è¦ï¼Œè¯·ç¼–å†™ä¸€ä¸ªææ„å‡½æ•°æˆ–override  <code>TearDown</code>å‡½æ•°æ¥é‡Šæ”¾èµ„æºã€‚è¦äº†è§£ä½•æ—¶åº”ä½¿ç”¨æ„é€ å‡½æ•°&#x2F;ææ„å‡½æ•°ä»¥åŠä½•æ—¶åº”ä½¿ç”¨<code>SetUp()/TearDown()</code>ï¼Œè¯·é˜…è¯»<span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3QvZmFxLmh0bWwjQ3RvclZzU2V0VXA=">å¸¸è§é—®é¢˜è§£ç­”<i class="fa fa-external-link-alt"></i></span>ã€‚</li>
<li>å¦‚æœéœ€è¦ï¼Œè¯·å®šä¹‰è¦å…±äº«çš„æµ‹è¯•å­ç¨‹åºã€‚</li>
</ol>
<p>å½“ä½¿ç”¨å¤¹å…·æ—¶ï¼Œä½¿ç”¨<code>TEST_F()</code>è€Œä¸æ˜¯<code>TEST()</code>ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨è®¿é—®æµ‹è¯•å¤¹å…·ä¸­çš„å¯¹è±¡å’Œå­ä¾‹ç¨‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">TEST_F</span>(TestFixtureClassName, TestName) </span><br><span class="line">&#123;</span><br><span class="line">  ... test body ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¯´æ˜</strong>ï¼šå¯¹äºä½¿ç”¨<code>TEST_F</code>å®šä¹‰çš„æ¯ä¸ªæµ‹è¯•ï¼Œ<code>gtest</code>å°†åœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•å¤¹å…·å¯¹è±¡ï¼Œå¹¶è°ƒç”¨<code>SetUp</code>å‡½æ•°åˆå§‹åŒ–èµ„æºã€‚è¿è¡Œå®Œä¸€ä¸ªæµ‹è¯•åï¼Œé€šè¿‡è°ƒç”¨<code>TearDown</code>å‡½æ•°è¿›è¡Œèµ„æºæ¸…ç†ï¼Œç„¶ååˆ é™¤è¿™ä¸ªå¯¹è±¡ã€‚å³åŒä¸€æµ‹è¯•å¤¹å…·ä¸­çš„ä¸åŒæµ‹è¯•ä¸ä¼šå¤ç”¨å¤¹å…·å¯¹è±¡ï¼Œä¸€ä¸ªæµ‹è¯•å¯¹å¤¹å…·æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¸ä¼šå½±å“å…¶ä»–æµ‹è¯•ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸ªè®¡ç®—å™¨ç±»ï¼Œè¦å¯¹å®ƒè¿›è¡ŒåŠŸèƒ½æµ‹è¯•ã€‚æˆ‘ä»¬å¸Œæœ›æ¯ä¸ªæµ‹è¯•éƒ½ä½¿ç”¨ä¸€äº›ç›¸åŒæ•°æ®ï¼Œå¹¶ä¸”ä¸åŒæµ‹è¯•ä¹‹é—´äº’ä¸å½±å“ï¼Œæ‰€ä»¥ä½¿ç”¨æµ‹è¯•å¤¹å…·ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—å™¨ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">subtract</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a - b; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•å¤¹å…·ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CalculatorTest</span> : <span class="keyword">public</span> ::testing::Test</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">	<span class="comment">// åœ¨æ¯ä¸ªæµ‹è¯•è¿è¡Œå‰è°ƒç”¨ï¼Œè¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">SetUp</span><span class="params">()</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">// åˆå§‹åŒ–ä¸€ä¸ª Calculator å¯¹è±¡</span></span><br><span class="line">		calculator = <span class="keyword">new</span> <span class="built_in">Calculator</span>();</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Setting up the test environment.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åœ¨æ¯ä¸ªæµ‹è¯•è¿è¡Œåè°ƒç”¨ï¼Œè¿›è¡Œæ¸…ç†</span></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">TearDown</span><span class="params">()</span> <span class="keyword">override</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">// åˆ é™¤ Calculator å¯¹è±¡ï¼Œæ¸…ç†èµ„æº</span></span><br><span class="line">		<span class="keyword">delete</span> calculator;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Tearing down the test environment.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// å…±äº«çš„æµ‹è¯•æ•°æ®</span></span><br><span class="line">	<span class="type">int</span> x = <span class="number">2024</span>;</span><br><span class="line">	<span class="type">int</span> y = <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">	Calculator *calculator;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•åŠ æ³•åŠŸèƒ½</span></span><br><span class="line"><span class="built_in">TEST_F</span>(CalculatorTest, AddTest)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// åœ¨ SetUp ä¸­åˆå§‹åŒ–äº† calculatorï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒ</span></span><br><span class="line">	<span class="type">int</span> result = calculator-&gt;<span class="built_in">add</span>(x, y);</span><br><span class="line">	<span class="built_in">EXPECT_EQ</span>(result, <span class="number">2025</span>);  <span class="comment">// éªŒè¯åŠ æ³•æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•å‡æ³•åŠŸèƒ½</span></span><br><span class="line"><span class="built_in">TEST_F</span>(CalculatorTest, SubtractTest)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// åœ¨ SetUp ä¸­åˆå§‹åŒ–äº† calculatorï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒ</span></span><br><span class="line">	<span class="type">int</span> result = calculator-&gt;<span class="built_in">subtract</span>(x, y);</span><br><span class="line">	<span class="built_in">EXPECT_EQ</span>(result, <span class="number">2023</span>);  <span class="comment">// éªŒè¯å‡æ³•æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“è¿è¡Œæµ‹è¯•ç¨‹åºæ—¶</p>
<ol>
<li><code>gtest</code>å…ˆåˆ›å»ºä¸€ä¸ªCalculatorTestå¯¹è±¡ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º<code>t1</code>ï¼‰</li>
<li>è°ƒç”¨<code>SetUp</code>å‡½æ•°å¯¹è®¡ç®—å™¨èµ„æºåˆå§‹åŒ–ï¼Œä½¿ç”¨t1æµ‹è¯•å®ŒåŠ æ³•åŠŸèƒ½åï¼Œè°ƒç”¨<code>TearDown</code>æ¸…ç†èµ„æºï¼Œå¹¶åˆ é™¤t1å¯¹è±¡</li>
<li>åˆ›å»ºå¦ä¸€ä¸ªå¯¹è±¡é‡å¤ä¸Šè¿°æ­¥éª¤æµ‹è¯•å‡æ³•åŠŸèƒ½</li>
</ol>
<p>ä¸è¿‡ä¸Šé¢ç¤ºä¾‹å¯ä»¥ä¸override <code>SetUp</code>å’Œ<code>TearDown</code>ï¼Œä½¿ç”¨æ„é€ ä¸ææ„å‡½æ•°ä¹Ÿèƒ½å®ç°ä¸€æ ·åŠŸèƒ½ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[user1@develop tests]$ ./hello_test </span><br><span class="line">Running main() from xxx</span><br><span class="line">[==========] Running 2 tests from 1 <span class="built_in">test</span> suite.</span><br><span class="line">[----------] Global <span class="built_in">test</span> environment set-up.</span><br><span class="line">[----------] 2 tests from CalculatorTest</span><br><span class="line">[ RUN      ] CalculatorTest.AddTest</span><br><span class="line">Setting up the <span class="built_in">test</span> environment.</span><br><span class="line">Tearing down the <span class="built_in">test</span> environment.</span><br><span class="line">[       OK ] CalculatorTest.AddTest (0 ms)</span><br><span class="line">[ RUN      ] CalculatorTest.SubtractTest</span><br><span class="line">Setting up the <span class="built_in">test</span> environment.</span><br><span class="line">Tearing down the <span class="built_in">test</span> environment.</span><br><span class="line">[       OK ] CalculatorTest.SubtractTest (0 ms)</span><br><span class="line">[----------] 2 tests from CalculatorTest (0 ms total)</span><br><span class="line"></span><br><span class="line">[----------] Global <span class="built_in">test</span> environment tear-down</span><br><span class="line">[==========] 2 tests from 1 <span class="built_in">test</span> suite ran. (0 ms total)</span><br><span class="line">[  PASSED  ] 2 tests.</span><br></pre></td></tr></table></figure>

<h3 id="1-3-4-ç¼–å†™mainå‡½æ•°"><a href="#1-3-4-ç¼–å†™mainå‡½æ•°" class="headerlink" title="1.3.4 ç¼–å†™mainå‡½æ•°"></a>1.3.4 ç¼–å†™mainå‡½æ•°</h3><p>åœ¨ä¸Šæ–‡çš„æ‰€æœ‰ç¤ºä¾‹ä¸­æˆ‘ä»¬éƒ½æ²¡æœ‰ç¼–å†™<code>main</code>å‡½æ•°ï¼Œè€Œæ˜¯é“¾æ¥<code>gtest-main</code>åº“ï¼Œåº“ä¸­æä¾›äº†ä¸€ä¸ªé»˜è®¤ <code>main</code>å‡½æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨åˆå§‹åŒ–æµ‹è¯•æ¡†æ¶å¹¶è¿è¡Œæ‰€æœ‰çš„æµ‹è¯•ï¼Œè¿™åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹é€‚ç”¨ã€‚</p>
<p>å¦‚æœéœ€è¦åœ¨æµ‹è¯•è¿è¡Œä¹‹å‰æ‰§è¡Œä¸€äº›æ— æ³•åœ¨æµ‹è¯•å¥—ä»¶å’Œæµ‹è¯•å¤¹å…·å†…è¡¨è¾¾çš„è‡ªå®šä¹‰æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±ç¼–å†™<code>main</code>å‡½æ•°ï¼Œè¿™ä¸ª<code>main</code>å‡½æ•°é€šå¸¸åŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>æµ‹è¯•è¿è¡Œå‰è‡ªå®šä¹‰æ“ä½œ</li>
<li>è°ƒç”¨<code>::testing::InitGoogleTest</code>å‡½æ•°è§£æ<code>gtest</code>å¯ä»¥è¯†åˆ«çš„å‘½ä»¤è¡Œå‚æ•°ï¼ˆæ ‡å¿—ï¼‰ï¼Œè¿™å…è®¸ç”¨æˆ·é€šè¿‡å„ç§å‚æ•°æ§åˆ¶æµ‹è¯•ç¨‹åºçš„è¡Œä¸º</li>
<li>è°ƒç”¨ <code>RUN_ALL_TESTS</code> æ¥è¿è¡Œæ‰€æœ‰çš„æµ‹è¯•ï¼Œå¦‚æœæ‰€æœ‰æµ‹è¯•è¿è¡ŒæˆåŠŸè¿”å›0ï¼Œå¦åˆ™è¿”å›1</li>
</ol>
<p>å½“è°ƒç”¨è¯¥<code>RUN_ALL_TESTS</code>ï¼š</p>
<ul>
<li>ä¿å­˜æ‰€æœ‰<code>gtest</code> æ ‡å¿—çš„çŠ¶æ€</li>
<li>ä¸ºç¬¬ä¸€ä¸ªæµ‹è¯•åˆ›å»ºä¸€ä¸ªæµ‹è¯•å¤¹å…·å¯¹è±¡</li>
<li>è°ƒç”¨<code>SetUp</code>åˆå§‹åŒ–</li>
<li>åœ¨å¤¹å…·å¯¹è±¡ä¸Šè¿è¡Œæµ‹è¯•</li>
<li>è°ƒç”¨<code>TearDown</code>æ¸…ç†</li>
<li>åˆ é™¤è¯¥å¯¹è±¡</li>
<li>æ¢å¤æ‰€æœ‰<code>gtest</code>æ ‡å¿—çš„çŠ¶æ€ã€‚</li>
<li>å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰æµ‹è¯•éƒ½è¿è¡Œå®Œæ¯•ã€‚</li>
</ul>
<blockquote>
<p>é‡è¦æç¤ºï¼šæ‚¨ä¸èƒ½å¿½ç•¥<code>RUN_ALL_TESTS</code>çš„è¿”å›å€¼ï¼Œå¦åˆ™å°†å¾—åˆ°ç¼–è¯‘å™¨é”™è¯¯ã€‚è¿™æ ·è®¾è®¡çš„ç†ç”±æ˜¯ï¼šè‡ªåŠ¨æµ‹è¯•æœåŠ¡åº”æ ¹æ®å…¶é€€å‡ºç ç¡®å®šæµ‹è¯•æ˜¯å¦é€šè¿‡ï¼Œè€Œä¸æ˜¯æ ¹æ®å…¶<code>stdout</code>&#x2F;<code>stderr</code>è¾“å‡ºï¼›</p>
<p>å¦å¤–ï¼Œ<code>RUN_ALL_TESTS</code>åªåº”è°ƒç”¨ä¸€æ¬¡ã€‚å¤šæ¬¡è°ƒç”¨ä¼šä¸æŸäº›é«˜çº§<code>gtest</code>åŠŸèƒ½ï¼ˆä¾‹å¦‚çº¿ç¨‹å®‰å…¨ <span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3QvYWR2YW5jZWQuaHRtbCNkZWF0aC10ZXN0cw==">æ­»äº¡æµ‹è¯•<i class="fa fa-external-link-alt"></i></span>ï¼‰ç›¸å†²çªã€‚</p>
</blockquote>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå…¨å±€çš„æ—¥å¿—ç³»ç»Ÿï¼Œéœ€è¦åœ¨è¿è¡Œæµ‹è¯•ä¹‹å‰åˆå§‹åŒ–æ—¥å¿—é…ç½®ï¼Œå¹¶åœ¨æ‰€æœ‰æµ‹è¯•ç»“æŸåå…³é—­æ—¥å¿—ç³»ç»Ÿã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ <code>main</code> å‡½æ•°æ¥å®Œæˆè¿™äº›æ“ä½œï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ª<code>hello_test.cc</code>çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿä¸€ä¸ªæ—¥å¿—ç³»ç»Ÿ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Logger</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">Initialize</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Logger initialized!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">Shutdown</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;Logger shutdown!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(MyTestSuite, Test1)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">EXPECT_EQ</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(MyTestSuite, Test2)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">EXPECT_NE</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰ main å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Logger::<span class="built_in">Initialize</span>(); <span class="comment">// å¯åŠ¨æ—¥å¿—ç³»ç»Ÿ</span></span><br><span class="line"></span><br><span class="line">	::testing::<span class="built_in">InitGoogleTest</span>(&amp;argc, argv); <span class="comment">// åˆå§‹åŒ– Google Test</span></span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> r = <span class="built_in">RUN_ALL_TESTS</span>(); <span class="comment">// è¿è¡Œæ‰€æœ‰æµ‹è¯•</span></span><br><span class="line"></span><br><span class="line">	Logger::<span class="built_in">Shutdown</span>(); <span class="comment">// è‡ªå®šä¹‰æ¸…ç†ï¼šå…³é—­æ—¥å¿—ç³»ç»Ÿ</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¦ç¼–è¯‘æµ‹è¯•ç¨‹åºï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°<code>CMakeLists.txt</code>ï¼š</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(</span><br><span class="line">        hello_test</span><br><span class="line">        hello_test.cpp</span><br><span class="line">)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(</span><br><span class="line">        hello_test</span><br><span class="line">        gtest <span class="comment"># æˆ‘ä»¬è‡ªå·±ç¼–å†™äº†mainå‡½æ•°ï¼Œæ‰€æœ‰é“¾æ¥gteståº“è€Œä¸æ˜¯gtest_mainåº“</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="1-3-5-æ–­è¨€å‚è€ƒ"><a href="#1-3-5-æ–­è¨€å‚è€ƒ" class="headerlink" title="1.3.5 æ–­è¨€å‚è€ƒ"></a>1.3.5 æ–­è¨€å‚è€ƒ</h3><p><code>gtest</code>ä½¿ç”¨æ–­è¨€æ¥éªŒè¯ä»£ç è¡Œä¸ºï¼Œè¦ä½¿ç”¨æ–­è¨€ï¼Œæ·»åŠ <code>#include &lt;gtest/gtest.h&gt;</code>ã€‚æœ¬èŠ‚å°†åˆ—å‡º<code>gtest</code>æä¾›çš„æ‰€æœ‰æ–­è¨€ï¼Œä»¥åæœ‰éœ€è¦å¯ä½œå‚è€ƒã€‚</p>
<p><code>gtest</code>æä¾›çš„æ–­è¨€å®å¤§å¤šæ•°æ˜¯<code>EXPECT_*</code>å’Œ<code>ASSER_*</code>é…å¯¹å‡ºç°ã€‚å½“å¤±è´¥æ—¶ï¼Œ<code>EXPECT_*</code>å®ä¼šäº§ç”Ÿéè‡´å‘½å¤±è´¥å¹¶å…è®¸å½“å‰å‡½æ•°ç»§ç»­è¿è¡Œï¼Œè€Œ<code>ASSERT_*</code> å®ä¼šäº§ç”Ÿè‡´å‘½å¤±è´¥å¹¶ä¸­æ­¢å½“å‰å‡½æ•°ã€‚</p>
<h4 id="1-3-5-1-å¸ƒå°”"><a href="#1-3-5-1-å¸ƒå°”" class="headerlink" title="1.3.5.1 å¸ƒå°”"></a>1.3.5.1 å¸ƒå°”</h4><table>
<thead>
<tr>
<th><strong>Fatal assertion</strong></th>
<th><strong>Nonfatal assertion</strong></th>
<th><strong>Verifies</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSERT_TRUE(condition)</code>;</td>
<td><code>EXPECT_TRUE(condition)</code>;</td>
<td>condition is <em>true</em></td>
</tr>
<tr>
<td><code>ASSERT_FALSE(condition)</code>;</td>
<td><code>EXPECT_FALSE(condition)</code>;</td>
<td>condition is <em>false</em></td>
</tr>
</tbody></table>
<h4 id="1-3-5-2-æ•´æ•°ã€æŒ‡é’ˆã€string"><a href="#1-3-5-2-æ•´æ•°ã€æŒ‡é’ˆã€string" class="headerlink" title="1.3.5.2 æ•´æ•°ã€æŒ‡é’ˆã€string"></a>1.3.5.2 æ•´æ•°ã€æŒ‡é’ˆã€string</h4><p>ä»¥ä¸‹æ–­è¨€æ¯”è¾ƒä¸¤ä¸ªå€¼ã€‚å€¼å‚æ•°å¿…é¡»èƒ½è¢«æ–­è¨€çš„æ¯”è¾ƒè¿ç®—ç¬¦æ¯”è¾ƒï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</p>
<p>å¦‚æœå‚æ•°æ”¯æŒ<code>&lt;&lt;</code>è¿ç®—ç¬¦ï¼Œåˆ™åœ¨æ–­è¨€å¤±è´¥æ—¶å°†è°ƒç”¨å®ƒæ¥æ‰“å°å‚æ•°ã€‚å¦åˆ™ï¼ŒGoogleTest å°†å°è¯•ä»¥æœ€ä½³æ–¹å¼æ‰“å°å®ƒä»¬ - è¯·å‚é˜… <span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3QvYWR2YW5jZWQuaHRtbCN0ZWFjaGluZy1nb29nbGV0ZXN0LWhvdy10by1wcmludC15b3VyLXZhbHVlcw==">æ•™ GoogleTest å¦‚ä½•æ‰“å°æ‚¨çš„å€¼<i class="fa fa-external-link-alt"></i></span>ã€‚</p>
<table>
<thead>
<tr>
<th><strong>Fatal assertion</strong></th>
<th><strong>Nonfatal assertion</strong></th>
<th><strong>Verifies</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSERT_EQ(val1, val2);</code></td>
<td><code>EXPECT_EQ(val1, val2);</code></td>
<td><em>val1</em> &#x3D;&#x3D; <em>val2</em></td>
</tr>
<tr>
<td><code>ASSERT_NE(val1, val2);</code></td>
<td><code>EXPECT_NE(val1, val2);</code></td>
<td><em>val1</em> !&#x3D; <em>val2</em></td>
</tr>
<tr>
<td><code>ASSERT_LT(val1, val2);</code></td>
<td><code>EXPECT_LT(val1, val2);</code></td>
<td><em>val1</em> &lt; <em>val2</em></td>
</tr>
<tr>
<td><code>ASSERT_LE(val1, val2);</code></td>
<td><code>EXPECT_LE(val1, val2);</code></td>
<td><em>val1</em> &lt;&#x3D; <em>val2</em></td>
</tr>
<tr>
<td><code>ASSERT_GT(val1, val2);</code></td>
<td><code>EXPECT_GT(val1, val2);</code></td>
<td><em>val1</em> &gt; <em>val2</em></td>
</tr>
<tr>
<td><code>ASSERT_GE(val1, val2);</code></td>
<td><code>EXPECT_GE(val1, val2);</code></td>
<td><em>val1</em> &gt;&#x3D; <em>val2</em></td>
</tr>
</tbody></table>
<p><code>ASSERT_EQ</code>ã€<code>EXPECT_EQ</code>å’Œ<code>ASSERT_NE</code>ã€<code>EXPECT_NE</code>è¿˜å¯ä»¥æ¯”è¾ƒï¼š</p>
<ol>
<li>C++ <code>std::string</code></li>
<li>æŒ‡é’ˆï¼Œå½“æ¯”è¾ƒæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºåº”ä½¿ç”¨<code>EXPECT_EQ(ptr, nullptr)</code>è€Œä¸æ˜¯<code>EXPECT_EQ(ptr, NULL)</code>ï¼Œå¯¹äº<code>ASSERT_NE</code>ä¹Ÿé€‚ç”¨</li>
</ol>
<h4 id="1-3-5-3-C-é£æ ¼å­—ç¬¦ä¸²"><a href="#1-3-5-3-C-é£æ ¼å­—ç¬¦ä¸²" class="headerlink" title="1.3.5.3 C é£æ ¼å­—ç¬¦ä¸²"></a>1.3.5.3 C é£æ ¼å­—ç¬¦ä¸²</h4><p>ä»¥ä¸‹æ–­è¨€æ¯”è¾ƒä¸¤ä¸ªC é£æ ¼å­—ç¬¦ä¸²ã€‚è¦æ¯”è¾ƒä¸¤ä¸ª<code>std::string</code> å¯¹è±¡æˆ– Cé£æ ¼å­—ç¬¦ä¸²ä¸ç©ºæŒ‡é’ˆæ¯”è¾ƒï¼Œè¯·æ”¹ç”¨<code>EXPECT_EQ</code>æˆ–<code>EXPECT_NE</code></p>
<table>
<thead>
<tr>
<th><strong>Fatal assertion</strong></th>
<th><strong>Nonfatal assertion</strong></th>
<th><strong>Verifies</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSERT_STREQ(str1, str2);</code></td>
<td><code>EXPECT_STREQ(str1, str2);</code></td>
<td>the two C strings have the same content</td>
</tr>
<tr>
<td><code>ASSERT_STRNE(str1, str2);</code></td>
<td><code>EXPECT_STRNE(str1, str2);</code></td>
<td>the two C strings have different content</td>
</tr>
<tr>
<td><code>ASSERT_STRCASEEQ(str1,str2);</code></td>
<td><code>EXPECT_STRCASEEQ(str1, str2);</code></td>
<td>the two C strings have the same content, ignoring case</td>
</tr>
<tr>
<td><code>ASSERT_STRCASENE(str1,str2);</code></td>
<td><code>EXPECT_STRCASENE(str1, str2);</code></td>
<td>the two C strings have different content, ignoring case</td>
</tr>
</tbody></table>
<h4 id="1-3-5-4-æµ®ç‚¹"><a href="#1-3-5-4-æµ®ç‚¹" class="headerlink" title="1.3.5.4 æµ®ç‚¹"></a>1.3.5.4 æµ®ç‚¹</h4><p>ç”±äºèˆå…¥è¯¯å·®ï¼Œä¸¤ä¸ªæµ®ç‚¹å€¼å®Œå…¨åŒ¹é…çš„å¯èƒ½æ€§å¾ˆå°ï¼Œå› æ­¤<code>EXPECT_EQ</code>ä¸åˆé€‚ã€‚é€šå¸¸ï¼Œä¸ºäº†ä½¿æµ®ç‚¹æ¯”è¾ƒæœ‰æ„ä¹‰ï¼Œç”¨æˆ·éœ€è¦ä»”ç»†é€‰æ‹©è¯¯å·®ç•Œé™ã€‚GoogleTest è¿˜æä¾›äº†ä½¿ç”¨åŸºäºæœ€åå•ä½ (ULP) çš„é»˜è®¤é”™è¯¯ç•Œé™çš„æ–­è¨€ã€‚è¦äº†è§£æœ‰å…³ ULP çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ–‡ç«  <span class="exturl" data-url="aHR0cHM6Ly9yYW5kb21hc2NpaS53b3JkcHJlc3MuY29tLzIwMTIvMDIvMjUvY29tcGFyaW5nLWZsb2F0aW5nLXBvaW50LW51bWJlcnMtMjAxMi1lZGl0aW9uLw==">æ¯”è¾ƒæµ®ç‚¹æ•°<i class="fa fa-external-link-alt"></i></span>ã€‚</p>
<p>å½¼æ­¤ä¹‹é—´çš„å·®å¼‚åœ¨ 4 ä¸ª ULP ä»¥å†…åˆ™è®¤ä¸ºç›¸ç­‰ã€‚</p>
<table>
<thead>
<tr>
<th><strong>Fatal assertion</strong></th>
<th><strong>Nonfatal assertion</strong></th>
<th><strong>Verifies</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSERT_FLOAT_EQ(val1,val2);</code></td>
<td><code>EXPECT_FLOAT_EQ(val1,val2);</code></td>
<td>the two <code>float</code> values are almost equal</td>
</tr>
<tr>
<td><code>ASSERT_DOUBLE_EQ(val1,val2);</code></td>
<td><code>EXPECT_DOUBLE_EQ(val1,val2);</code></td>
<td>the two <code>double</code> values are almost equa</td>
</tr>
</tbody></table>
<p>éªŒè¯val1å’Œval2ä¹‹é—´çš„å·®å€¼ä¸ä¼šè¶…è¿‡ç»å¯¹è¯¯å·®ç•Œé™<code>abs_error</code>ã€‚</p>
<table>
<thead>
<tr>
<th><strong>Fatal assertion</strong></th>
<th><strong>Nonfatal assertion</strong></th>
<th><strong>Verifies</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSERT_NEAR(val1, val2, abs_error);</code></td>
<td><code>EXPECT_NEAR(val1, val2, abs_error);</code></td>
<td>the difference between <em>val1</em> and <em>val2</em> doesnâ€™t exceed the given absolute error</td>
</tr>
</tbody></table>
<h4 id="1-3-5-5-å¼‚å¸¸"><a href="#1-3-5-5-å¼‚å¸¸" class="headerlink" title="1.3.5.5 å¼‚å¸¸"></a>1.3.5.5 å¼‚å¸¸</h4><p>ä»¥ä¸‹æ–­è¨€éªŒè¯ä¸€æ®µä»£ç æ˜¯å¦æŠ›å‡ºå¼‚å¸¸ã€‚ä½¿ç”¨æ—¶éœ€è¦åœ¨æ„å»ºç¯å¢ƒä¸­å¯ç”¨å¼‚å¸¸ã€‚</p>
<table>
<thead>
<tr>
<th><strong>Fatal assertion</strong></th>
<th><strong>Nonfatal assertion</strong></th>
<th><strong>Verifies</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSERT_THROW(statement, exception_type);</code></td>
<td><code>EXPECT_THROW(statement, exception_type);</code></td>
<td><em>statement</em> throws an exception of the given type</td>
</tr>
<tr>
<td><code>ASSERT_ANY_THROW(statement);</code></td>
<td><code>EXPECT_ANY_THROW(statement);</code></td>
<td><em>statement</em> throws an exception of any type</td>
</tr>
<tr>
<td><code>ASSERT_NO_THROW(statement);</code></td>
<td><code>EXPECT_NO_THROW(statement);</code></td>
<td><em>statement</em> doesnâ€™t throw any exception</td>
</tr>
</tbody></table>
<p>æµ‹è¯•ä¾‹å­ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">throws_invalid_argument</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(<span class="string">&quot;Invalid argument&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">throws_out_of_range</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">throw</span> std::<span class="built_in">out_of_range</span>(<span class="string">&quot;Out of range&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(ExceptionTest, ExpectThrowTest)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">EXPECT_THROW</span>(<span class="built_in">throws_invalid_argument</span>(), std::invalid_argument); <span class="comment">// æ–­è¨€æˆåŠŸ</span></span><br><span class="line">	<span class="built_in">EXPECT_THROW</span>(<span class="built_in">throws_out_of_range</span>(), std::invalid_argument); <span class="comment">// æ–­è¨€å¤±è´¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(ExceptionTest, ExpectAnyThrowTest)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// æµ‹è¯•æ˜¯å¦æŠ›å‡ºäº†ä»»ä½•ç±»å‹çš„å¼‚å¸¸</span></span><br><span class="line">	<span class="built_in">EXPECT_ANY_THROW</span>(<span class="built_in">throws_invalid_argument</span>()); <span class="comment">// æ–­è¨€æˆåŠŸ</span></span><br><span class="line">	<span class="built_in">EXPECT_ANY_THROW</span>(<span class="built_in">throws_out_of_range</span>()); <span class="comment">// æ–­è¨€æˆåŠŸ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(ExceptionTest, ExpectNoThrowTest)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// æµ‹è¯•æ˜¯å¦æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">	<span class="built_in">EXPECT_NO_THROW</span>(<span class="built_in">throws_invalid_argument</span>()); <span class="comment">// æ–­è¨€å¤±è´¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[user1@develop tests]$ ./hello_test </span><br><span class="line">Running main() from xxx</span><br><span class="line">[==========] Running 3 tests from 1 <span class="built_in">test</span> suite.</span><br><span class="line">[----------] Global <span class="built_in">test</span> environment set-up.</span><br><span class="line">[----------] 3 tests from ExceptionTest</span><br><span class="line">[ RUN      ] ExceptionTest.ExpectThrowTest</span><br><span class="line">/xxx/hello_test.cpp:16: Failure</span><br><span class="line">Expected: throws_out_of_range() throws an exception of <span class="built_in">type</span> std::invalid_argument.</span><br><span class="line">  Actual: it throws a different <span class="built_in">type</span>.</span><br><span class="line">[  FAILED  ] ExceptionTest.ExpectThrowTest (0 ms)</span><br><span class="line">[ RUN      ] ExceptionTest.ExpectAnyThrowTest</span><br><span class="line">[       OK ] ExceptionTest.ExpectAnyThrowTest (0 ms)</span><br><span class="line">[ RUN      ] ExceptionTest.ExpectNoThrowTest</span><br><span class="line">/xxx/hello_test.cpp:30: Failure</span><br><span class="line">Expected: throws_invalid_argument() doesn<span class="string">&#x27;t throw an exception.</span></span><br><span class="line"><span class="string">  Actual: it throws.</span></span><br><span class="line"><span class="string">[  FAILED  ] ExceptionTest.ExpectNoThrowTest (0 ms)</span></span><br><span class="line"><span class="string">[----------] 3 tests from ExceptionTest (0 ms total)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[----------] Global test environment tear-down</span></span><br><span class="line"><span class="string">[==========] 3 tests from 1 test suite ran. (1 ms total)</span></span><br><span class="line"><span class="string">[  PASSED  ] 1 test.</span></span><br><span class="line"><span class="string">[  FAILED  ] 2 tests, listed below:</span></span><br><span class="line"><span class="string">[  FAILED  ] ExceptionTest.ExpectThrowTest</span></span><br><span class="line"><span class="string">[  FAILED  ] ExceptionTest.ExpectNoThrowTest</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 2 FAILED TESTS</span></span><br></pre></td></tr></table></figure>

<h4 id="1-3-5-6-è°“è¯"><a href="#1-3-5-6-è°“è¯" class="headerlink" title="1.3.5.6 è°“è¯"></a>1.3.5.6 è°“è¯</h4><p>ä»¥ä¸‹æ–­è¨€å¯ä»¥éªŒè¯æ›´å¤æ‚çš„è°“è¯(Predicateï¼Œä¸€ä¸ªè¿”å›boolçš„å¯è°ƒç”¨å¯¹è±¡)ï¼Œå¹¶æ‰“å°æ¯”<code>EXPECT_TRUE</code>æ›´æ¸…æ™°çš„å¤±è´¥ä¿¡æ¯ã€‚</p>
<p>å‚æ•°<code>pred</code>æ˜¯ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼Œå®ƒæ¥å—ä¸ç›¸åº”å®ç›¸åŒæ•°é‡çš„å‚æ•°ã€‚å¦‚æœ<code>pred</code>å¯¹ç»™å®šçš„å‚æ•°è¿”å›trueï¼Œåˆ™æ–­è¨€æˆåŠŸï¼Œå¦åˆ™æ–­è¨€å¤±è´¥ã€‚å½“æ–­è¨€å¤±è´¥æ—¶ï¼Œå®ƒæ‰“å°å‡ºæ¯ä¸ªå®å‚çš„å€¼ï¼Œä¾¿äºæ’é”™ï¼Œå®ƒæœ€å¤šæ¥å—5ä¸ªå‚æ•°ã€‚</p>
<table>
<thead>
<tr>
<th><strong>Fatal assertion</strong></th>
<th><strong>Nonfatal assertion</strong></th>
<th><strong>Verifies</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSERT_PRED1(pred, val1);</code></td>
<td><code>EXPECT_PRED1(pred, val1);</code></td>
<td><em>pred(val1)</em> return true</td>
</tr>
<tr>
<td><code>ASSERT_PRED2(pred, val1, val2);</code></td>
<td><code>EXPECT_PRED2(pred, val1, val2);</code></td>
<td><em>pred(val1, val2)</em> return true</td>
</tr>
<tr>
<td><code>ASSERT_PRED3(pred, val1, val2, val3);</code></td>
<td><code>EXPECT_PRED3(pred, val1, val2, val3);</code></td>
<td><em>pred(val1, val2, val3)</em> return true</td>
</tr>
<tr>
<td><code>ASSERT_PRED4(pred, val1, val2, val3, val4);</code></td>
<td><code>EXPECT_PRED2(pred, val1, val2, val3 ,val4);</code></td>
<td><em>pred(val1, val2, val3 ,val4)</em> return true</td>
</tr>
<tr>
<td><code>ASSERT_PRED5(pred, val1, val2, val3, val4 ,val5);</code></td>
<td><code>EXPECT_PRED2(pred, val1, val2, val3, val4, val5);</code></td>
<td><em>pred(val1, val2, val3, val4, val5)</em> return true</td>
</tr>
</tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è°“è¯å‡½æ•°ï¼šæ£€æŸ¥ value æ˜¯å¦åœ¨ [low, high] èŒƒå›´å†…</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsInRange</span><span class="params">(<span class="type">int</span> value, <span class="type">int</span> low, <span class="type">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> value &gt;= low &amp;&amp; value &lt;= high;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(PredicateTest, IsInRangeTest)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> low = <span class="number">2000</span>;</span><br><span class="line">	<span class="type">int</span> high = <span class="number">2025</span>;</span><br><span class="line">	<span class="type">int</span> value = <span class="number">2012</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">EXPECT_PRED3</span>(IsInRange, value, low, high); <span class="comment">// æ–­è¨€æˆåŠŸ</span></span><br><span class="line">	<span class="built_in">EXPECT_TRUE</span>(<span class="built_in">IsInRange</span>(value, low, high));  <span class="comment">// æ–­è¨€æˆåŠŸ</span></span><br><span class="line"></span><br><span class="line">	value = <span class="number">2026</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">EXPECT_PRED3</span>(IsInRange, value, low, high); <span class="comment">// æ–­è¨€å¤±è´¥</span></span><br><span class="line">	<span class="built_in">EXPECT_TRUE</span>(<span class="built_in">IsInRange</span>(value, low, high));  <span class="comment">// æ–­è¨€å¤±è´¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š<code>ASSERT_PRED2</code>å¯ä»¥æ‰“å°æ‰€æœ‰å‚æ•°çš„å€¼ï¼Œæœ‰åŠ©äºå¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[user1@develop tests]$ ./hello_test </span><br><span class="line">Running main() from xxx</span><br><span class="line">[==========] Running 1 <span class="built_in">test</span> from 1 <span class="built_in">test</span> suite.</span><br><span class="line">[----------] Global <span class="built_in">test</span> environment set-up.</span><br><span class="line">[----------] 1 <span class="built_in">test</span> from PredicateTest</span><br><span class="line">[ RUN      ] PredicateTest.IsInRangeTest</span><br><span class="line">/xxx/hello_test.cpp:20: Failure</span><br><span class="line">IsInRange(value, low, high) evaluates to <span class="literal">false</span>, <span class="built_in">where</span></span><br><span class="line">value evaluates to 2026</span><br><span class="line">low evaluates to 2000</span><br><span class="line">high evaluates to 2025</span><br><span class="line">/xxx/hello_test.cpp:21: Failure</span><br><span class="line">Value of: IsInRange(value, low, high)</span><br><span class="line">  Actual: <span class="literal">false</span></span><br><span class="line">Expected: <span class="literal">true</span></span><br><span class="line">[  FAILED  ] PredicateTest.IsInRangeTest (0 ms)</span><br><span class="line">[----------] 1 <span class="built_in">test</span> from PredicateTest (0 ms total)</span><br><span class="line"></span><br><span class="line">[----------] Global <span class="built_in">test</span> environment tear-down</span><br><span class="line">[==========] 1 <span class="built_in">test</span> from 1 <span class="built_in">test</span> suite ran. (0 ms total)</span><br><span class="line">[  PASSED  ] 0 tests.</span><br><span class="line">[  FAILED  ] 1 <span class="built_in">test</span>, listed below:</span><br><span class="line">[  FAILED  ] PredicateTest.IsInRangeTest</span><br><span class="line"></span><br><span class="line"> 1 FAILED TEST</span><br></pre></td></tr></table></figure>




<blockquote>
<p>æ³¨æ„ï¼Œå¦‚æœç»™å®šçš„è°“è¯æ˜¯é‡è½½å‡½æ•°æˆ–å‡½æ•°æ¨¡æ¿ï¼Œæ–­è¨€å®å¯èƒ½æ— æ³•ç¡®å®šè°ƒç”¨å“ªä¸ªç‰ˆæœ¬ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦æ˜ç¡®æŒ‡å®šå‡½æ•°çš„ç±»å‹ã€‚</p>
</blockquote>
<p>å¯¹äº<code>IsPositive</code>é‡è½½ä¸ºå•ä¸ªå‚æ•°ä¸º<code>int</code>æˆ–<code>double</code>ç‰ˆæœ¬ï¼Œä½¿ç”¨æ—¶éœ€è¦æ˜¾å¼æŒ‡å®šå‡½æ•°çš„ç±»å‹</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsPositive</span><span class="params">(<span class="type">int</span> n)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsPositive</span><span class="params">(<span class="type">double</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">0.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">EXPECT_PRED1</span>(IsPositive&lt;<span class="type">int</span>&gt;, <span class="number">5</span>); </span><br><span class="line"></span><br><span class="line"><span class="built_in">EXPECT_PRED1</span>(IsPositive&lt;<span class="type">int</span>&gt;, <span class="number">5</span>); </span><br></pre></td></tr></table></figure>

<p>å¯¹äºå‡½æ•°æ¨¡ç‰ˆä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsPositive</span><span class="params">(T n)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> n &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">EXPECT_PRED1</span>(IsPositive&lt;<span class="type">int</span>&gt;, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">EXPECT_PRED1</span>(IsPositive&lt;<span class="type">double</span>&gt;, <span class="number">3.14</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>å¦‚æœæ‚¨æƒ³è‡ªå®šä¹‰æ–­è¨€å¤±è´¥çš„é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç±»å®ã€‚å‚æ•°<code>pred_formatter</code>æ˜¯ä¸€ä¸ªå…·æœ‰ä»¥ä¸‹ç­¾åçš„å¯è°ƒç”¨å¯¹è±¡ï¼Œå…¶ä¸­<code>val1</code>ã€<code>val2</code>ã€ â€¦<code>valn</code>æ˜¯è°“è¯å‚æ•°çš„å€¼ï¼Œè€Œ<code>expr1</code>ã€<code>expr2</code>ã€ â€¦<code>exprn</code>æ˜¯æºä»£ç ä¸­å¯¹åº”çš„è¡¨è¾¾å¼ã€‚ç±»å‹<code>T1</code>ã€<code>T2</code>ã€ â€¦<code>Tn</code> å¯ä»¥æ˜¯å€¼ç±»å‹æˆ–å¼•ç”¨ç±»å‹ï¼Œä¾‹<code>T</code>ã€<code>T&amp;</code>ã€<code>const T&amp;</code>ç­‰ã€‚æœ‰å…³è¿”å›ç±»å‹çš„æ›´å¤šä¿¡æ¯<code>testing::AssertionResult</code>ï¼Œè¯·å‚é˜… <span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3QvYWR2YW5jZWQuaHRtbCN1c2luZy1hLWZ1bmN0aW9uLXRoYXQtcmV0dXJucy1hbi1hc3NlcnRpb25yZXN1bHQ=">è¿”å› AssertionResult çš„å‡½æ•°<i class="fa fa-external-link-alt"></i></span>ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">testing::AssertionResult <span class="title">PredicateFormatter</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* expr1,</span></span></span><br><span class="line"><span class="params"><span class="function">                                            <span class="type">const</span> <span class="type">char</span>* expr2,</span></span></span><br><span class="line"><span class="params"><span class="function">                                            ...</span></span></span><br><span class="line"><span class="params"><span class="function">                                            <span class="type">const</span> <span class="type">char</span>* exprn,</span></span></span><br><span class="line"><span class="params"><span class="function">                                            T1 val1,</span></span></span><br><span class="line"><span class="params"><span class="function">                                            T2 val2,</span></span></span><br><span class="line"><span class="params"><span class="function">                                            ...</span></span></span><br><span class="line"><span class="params"><span class="function">                                            Tn valn)</span></span>;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>Fatal assertion</strong></th>
<th><strong>Nonfatal assertion</strong></th>
<th><strong>Verifies</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSERT_PRED_FORMAT1(pred_formatter, val1);</code></td>
<td><code>EXPECT_PRED_FORMAT1(pred_formatter, val1);</code></td>
<td><em>pred_formatter(expr1, val1)</em> return true</td>
</tr>
<tr>
<td><code>ASSERT_PRED_FORMAT2(pred_formatter, val1, val2);</code></td>
<td><code>EXPECT_PRED_FORMAT2(pred_formatter, val1, val2);</code></td>
<td>â€¦</td>
</tr>
<tr>
<td><code>ASSERT_PRED_FORMAT3(pred_formatter, val1, val2, val3);</code></td>
<td><code>EXPECT_PRED_FORMAT3(pred_formatter, val1, val2, val3);</code></td>
<td>â€¦</td>
</tr>
<tr>
<td><code>ASSERT_PRED_FORMAT4(pred_formatter, val1, val2, val3, val4);</code></td>
<td><code>EXPECT_PRED_FORMAT4(pred_formatter, val1, val2, val3 ,val4);</code></td>
<td>â€¦</td>
</tr>
<tr>
<td><code>ASSERT_PRED_FORMAT5(pred_formatter, val1, val2, val3, val4 ,val5);</code></td>
<td><code>EXPECT_PRED_FORMAT5(pred_formatter, val1, val2, val3, val4, val5);</code></td>
<td>â€¦</td>
</tr>
</tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">IsInRange</span><span class="params">(<span class="type">int</span> value, <span class="type">int</span> low, <span class="type">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> value &gt;= low &amp;&amp; value &lt;= high;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::<span class="function">testing::AssertionResult <span class="title">IsInRangeFormat</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">		<span class="type">const</span> <span class="type">char</span> *value_expr, <span class="type">const</span> <span class="type">char</span> *low_expr, <span class="type">const</span> <span class="type">char</span> *high_expr,</span></span></span><br><span class="line"><span class="params"><span class="function">		<span class="type">int</span> value, <span class="type">int</span> low, <span class="type">int</span> high)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">IsInRange</span>(value, low, high))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> ::testing::<span class="built_in">AssertionSuccess</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> ::testing::<span class="built_in">AssertionFailure</span>()</span><br><span class="line">				&lt;&lt; <span class="string">&quot;Value &quot;</span> &lt;&lt; value_expr &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; value</span><br><span class="line">				&lt;&lt; <span class="string">&quot; is not in range [&quot;</span> &lt;&lt; low_expr &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; low</span><br><span class="line">				&lt;&lt; <span class="string">&quot;, &quot;</span> &lt;&lt; high_expr &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; high &lt;&lt; <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(PredicateFormatTest, IsInRangeTest)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> low = <span class="number">2000</span>;</span><br><span class="line">	<span class="type">int</span> high = <span class="number">2025</span>;</span><br><span class="line">	<span class="type">int</span> value = <span class="number">2026</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">EXPECT_PRED_FORMAT3</span>(IsInRangeFormat, value, low, high);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[user1@develop tests]$ ./hello_test </span><br><span class="line">Running main() from xxx</span><br><span class="line">[==========] Running 1 <span class="built_in">test</span> from 1 <span class="built_in">test</span> suite.</span><br><span class="line">[----------] Global <span class="built_in">test</span> environment set-up.</span><br><span class="line">[----------] 1 <span class="built_in">test</span> from PredicateFormatTest</span><br><span class="line">[ RUN      ] PredicateFormatTest.IsInRangeTest</span><br><span class="line">/xxx/hello_test.cpp:32: Failure</span><br><span class="line">Value value = 2026 is not <span class="keyword">in</span> range [low = 2000, high = 2025]</span><br><span class="line">[  FAILED  ] PredicateFormatTest.IsInRangeTest (0 ms)</span><br><span class="line">[----------] 1 <span class="built_in">test</span> from PredicateFormatTest (0 ms total)</span><br><span class="line"></span><br><span class="line">[----------] Global <span class="built_in">test</span> environment tear-down</span><br><span class="line">[==========] 1 <span class="built_in">test</span> from 1 <span class="built_in">test</span> suite ran. (0 ms total)</span><br><span class="line">[  PASSED  ] 0 tests.</span><br><span class="line">[  FAILED  ] 1 <span class="built_in">test</span>, listed below:</span><br><span class="line">[  FAILED  ] PredicateFormatTest.IsInRangeTest</span><br><span class="line"></span><br><span class="line"> 1 FAILED TEST</span><br></pre></td></tr></table></figure>

<h4 id="1-3-5-7-æ˜¾å¼çš„æˆåŠŸå’Œå¤±è´¥"><a href="#1-3-5-7-æ˜¾å¼çš„æˆåŠŸå’Œå¤±è´¥" class="headerlink" title="1.3.5.7 æ˜¾å¼çš„æˆåŠŸå’Œå¤±è´¥"></a>1.3.5.7 æ˜¾å¼çš„æˆåŠŸå’Œå¤±è´¥</h4><p>æœ¬èŠ‚ä¸­çš„æ–­è¨€ç›´æ¥ç”ŸæˆæˆåŠŸæˆ–å¤±è´¥ï¼Œè€Œä¸æ˜¯æµ‹è¯•å€¼æˆ–è¡¨è¾¾å¼ã€‚å½“ç”±æ§åˆ¶æµè€Œä¸æ˜¯å¸ƒå°”è¡¨è¾¾å¼å†³å®šæµ‹è¯•çš„æˆåŠŸæˆ–å¤±è´¥æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚</p>
<p><code>SUCCEED()</code> ï¼š ç”ŸæˆæˆåŠŸï¼Œè¿™å¹¶ä¸ä¼šä½¿æ•´ä¸ªæµ‹è¯•æˆåŠŸã€‚åªæœ‰å½“æµ‹è¯•åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ²¡æœ‰ä»»ä½•æ–­è¨€å¤±è´¥æ—¶ï¼Œæµ‹è¯•æ‰è¢«è§†ä¸ºæˆåŠŸã€‚è¯¥<code>SUCCEED</code>æ–­è¨€çº¯ç²¹æ˜¯è®°å½•æ€§çš„ï¼Œç›®å‰ä¸ä¼šç”Ÿæˆä»»ä½•ç”¨æˆ·å¯è§çš„è¾“å‡ºã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨æœªæ¥å°†<code>SUCCEED</code>æ¶ˆæ¯æ·»åŠ åˆ°<code>gtest</code>è¾“å‡ºä¸­ã€‚</p>
<p><code>FAIL()</code> ï¼šç”Ÿæˆè‡´å‘½å¤±è´¥å¹¶ä»å½“å‰å‡½æ•°è¿”å›ã€‚åªèƒ½åœ¨è¿”å› <code>void </code>çš„å‡½æ•°ä¸­ä½¿ç”¨ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3QvYWR2YW5jZWQuaHRtbCNhc3NlcnRpb24tcGxhY2VtZW50">æ–­è¨€æ”¾ç½®ã€‚<i class="fa fa-external-link-alt"></i></span></p>
<p><code>ADD_FAILURE()</code>ï¼šç”Ÿæˆéè‡´å‘½å¤±è´¥ï¼Œå…è®¸å½“å‰å‡½æ•°ç»§ç»­è¿è¡Œã€‚</p>
<p><code>ADD_FAILURE_AT(file_path, line_number)</code>ï¼šåœ¨æŒ‡å®šçš„æ–‡ä»¶å’Œè¡Œå·å¤„ç”Ÿæˆéè‡´å‘½å¤±è´¥</p>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gtest/gtest.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(AdditionTest, HandlesVariousConditions)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> result = <span class="built_in">add</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">if</span> (<span class="number">2</span> == result)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">SUCCEED</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">FAIL</span>() &lt;&lt; <span class="string">&quot;Unexpected result for 1 + 1: &quot;</span> &lt;&lt; result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	result = <span class="built_in">add</span>(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">	<span class="keyword">if</span> (result != <span class="number">4</span>)  <span class="comment">// ä½¿ç”¨ ADD_FAILUREæ¥è®°å½•ä¸€ä¸ªå¤±è´¥ï¼Œä½†ä¸ä¸­æ­¢æµ‹è¯•</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">ADD_FAILURE</span>() &lt;&lt; <span class="string">&quot;Expected 2 + 2 to be 4, but got &quot;</span> &lt;&lt; result;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	result = <span class="built_in">add</span>(<span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">	<span class="keyword">if</span> (result != <span class="number">6</span>) <span class="comment">// ä½¿ç”¨ ADD_FAILURE_AT() æ¥è®°å½•å¤±è´¥ï¼ŒæŒ‡å®šæ–‡ä»¶å’Œè¡Œå·</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">ADD_FAILURE_AT</span>(__FILE__, __LINE__ - <span class="number">3</span>) &lt;&lt; <span class="string">&quot;Expected 3 + 3 to be 6, but got &quot;</span> &lt;&lt; result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-5-8-åŒ¹é…å™¨"><a href="#1-3-5-8-åŒ¹é…å™¨" class="headerlink" title="1.3.5.8 åŒ¹é…å™¨"></a>1.3.5.8 åŒ¹é…å™¨</h4><p>ä»¥ä¸‹æ–­è¨€ä½¿ç”¨åŒ¹é…å™¨å¯¹æµ‹è¯•å€¼è¿›è¡Œæ›´çµæ´»ã€å¯è¯»æ€§æ›´å¼ºçš„éªŒè¯ã€‚å¯ä»¥ä½¿ç”¨<span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3QvcmVmZXJlbmNlL21hdGNoZXJzLmh0bWw=">å†…ç½®<i class="fa fa-external-link-alt"></i></span>æˆ–<span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3QvZ21vY2tfY29va19ib29rLmh0bWwjTmV3TWF0Y2hlcnM=">è‡ªå®šä¹‰çš„åŒ¹é…å™¨<i class="fa fa-external-link-alt"></i></span>æ¥éªŒè¯å€¼æ˜¯å¦ä¸åŒ¹é…å™¨åŒ¹é…ã€‚ä½¿ç”¨æ—¶éœ€è¦é“¾æ¥<code>gmock</code>åº“ã€‚</p>
<p><code>EXPECT_THAT(value, matcher);</code><br><code>ASSERT_THAT(value, matcher);</code></p>
<p>valueï¼šè¦æµ‹è¯•çš„å€¼ã€‚<br>matcherï¼šåŒ¹é…å™¨ï¼Œå¯ä»¥æ˜¯å†…ç½®çš„åŒ¹é…å™¨ï¼ˆå¦‚ <code>Eq()</code>, <code>Le()</code>, <code>Gt()</code> ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„åŒ¹é…å™¨ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç éªŒè¯valæ˜¯å¦ä»‹äº 5 å’Œ 10 ä¹‹é—´ï¼Œå­—ç¬¦ä¸²stræ˜¯å¦ä»¥â€Helloâ€å¼€å¤´ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;gmock/gmock.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> ::testing::AllOf;</span><br><span class="line"><span class="keyword">using</span> ::testing::Gt;</span><br><span class="line"><span class="keyword">using</span> ::testing::Lt;</span><br><span class="line"><span class="keyword">using</span> ::testing::StartsWith;</span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(MathTest, AssertThatExample)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> val = <span class="number">4</span>;</span><br><span class="line">	<span class="function">std::string <span class="title">str</span><span class="params">(<span class="string">&quot;Hi World&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">EXPECT_THAT</span>(val, <span class="built_in">AllOf</span>(<span class="built_in">Gt</span>(<span class="number">5</span>), <span class="built_in">Lt</span>(<span class="number">10</span>))); </span><br><span class="line">	<span class="built_in">EXPECT_THAT</span>(str, <span class="built_in">StartsWith</span>(<span class="string">&quot;Hello&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-5-9-Windows-HRESULT"><a href="#1-3-5-9-Windows-HRESULT" class="headerlink" title="1.3.5.9 Windows HRESULT"></a>1.3.5.9 Windows HRESULT</h4><p>ä»¥ä¸‹æ–­è¨€æµ‹è¯•<code>HRESULT</code>æˆåŠŸæˆ–å¤±è´¥ã€‚</p>
<table>
<thead>
<tr>
<th><strong>Fatal assertion</strong></th>
<th><strong>Nonfatal assertion</strong></th>
<th><strong>Verifies</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>ASSERT_HRESULT_SUCCEEDED(expression);</code></td>
<td><code>EXPECT_HRESULT_SUCCEEDED(expression);</code></td>
<td>expression is a success <code>HRESULT</code></td>
</tr>
<tr>
<td><code>ASSERT_HRESULT_FAILED(expression);</code></td>
<td><code>EXPECT_HRESULT_FAILED(expression);</code></td>
<td>expression is a failure <code>HRESULT</code></td>
</tr>
</tbody></table>
<h4 id="1-3-5-10-æ­»äº¡æ–­è¨€"><a href="#1-3-5-10-æ­»äº¡æ–­è¨€" class="headerlink" title="1.3.5.10 æ­»äº¡æ–­è¨€"></a>1.3.5.10 æ­»äº¡æ–­è¨€</h4><p><span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3QvcmVmZXJlbmNlL2Fzc2VydGlvbnMuaHRtbCNkZWF0aA==">æ­»äº¡æ–­è¨€<i class="fa fa-external-link-alt"></i></span>ä¸åç»­è¿›é˜¶ä¸»é¢˜ä¸­æ­»äº¡æµ‹è¯•æ¯æ¯ç›¸å…³ï¼Œå› æ­¤å°†å®ƒä»¬èä¸ºä¸€èŠ‚ï¼Œå°†åœ¨åç»­è¿›é˜¶ä¸»é¢˜ä¸­è®²è§£ã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><span class="exturl" data-url="aHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2dvb2dsZXRlc3Qv">GoogleTest Userâ€™s Guide<i class="fa fa-external-link-alt"></i></span></p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>JiaLong Kang
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://blog.kjlcloud.com/gtest-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" title="gtest å¿«é€Ÿå…¥é—¨">https://blog.kjlcloud.com/gtest-å¿«é€Ÿå…¥é—¨.html</a>
  </li>
  <li class="post-copyright-license">
      <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/gtest/" rel="tag"># gtest</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/RocksDB%E6%98%AF%E4%BB%80%E4%B9%88.html" rel="prev" title="RocksDBæ˜¯ä»€ä¹ˆ">
                  <i class="fa fa-angle-left"></i> RocksDBæ˜¯ä»€ä¹ˆ
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/C-C-%E5%9C%A8assert%E4%B8%AD%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8%E5%B8%A6%E6%9C%89%E5%89%AF%E4%BD%9C%E7%94%A8%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" rel="next" title="C/C++ åœ¨assertä¸­ä¸è¦ä½¿ç”¨å¸¦æœ‰å‰¯ä½œç”¨çš„è¡¨è¾¾å¼">
                  C/C++ åœ¨assertä¸­ä¸è¦ä½¿ç”¨å¸¦æœ‰å‰¯ä½œç”¨çš„è¡¨è¾¾å¼ <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  
  <div class="comments giscus-container">
  </div>
  
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">JiaLong Kang</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">139k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">23:05</span>
  </span>
</div>
  <div class="powered-by">Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9taXN0Lw==">NexT.Mist</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  

  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/11.1.0/firebase-app-compat.js" integrity="sha256-k2eD8Bl04gp35v4S01cNbO+3UeLK6mVqpOyUJz4aXzY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/11.1.0/firebase-firestore-compat.js" integrity="sha256-r1EpenNle+MZs+KB73PFJnrmIF3k29t5XGrSqfZ9PPw=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="firestore" type="application/json">{"enable":true,"collection":"articles","apiKey":"AIzaSyBCFUzgKljVw79xwbpPzgulwgSDHq4qYg0","projectId":"kjl-blog"}</script>
  <script src="/js/third-party/statistics/firestore.js"></script>



<script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"JiaLong-Kang/JiaLong-Kang.github.io","repo_id":"R_kgDOOBwtTw","category":"Announcements","category_id":"DIC_kwDOOBwtT84Cnevb","mapping":"pathname","strict":0,"reactions_enabled":1,"emit_metadata":1,"theme":"light","lang":"en","crossorigin":"anonymous","input_position":"bottom","loading":"lazy"}</script>

<script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.page.comments) return;

  NexT.utils.loadComments('.giscus-container')
    .then(() => NexT.utils.getScript('https://giscus.app/client.js', {
      attributes: {
        async                   : true,
        crossOrigin             : 'anonymous',
        'data-repo'             : CONFIG.giscus.repo,
        'data-repo-id'          : CONFIG.giscus.repo_id,
        'data-category'         : CONFIG.giscus.category,
        'data-category-id'      : CONFIG.giscus.category_id,
        'data-mapping'          : CONFIG.giscus.mapping,
        'data-strict'           : CONFIG.giscus.strict,
        'data-reactions-enabled': CONFIG.giscus.reactions_enabled,
        'data-emit-metadata'    : CONFIG.giscus.emit_metadata,
        'data-theme'            : CONFIG.giscus.theme,
        'data-lang'             : CONFIG.giscus.lang,
        'data-input-position'   : CONFIG.giscus.input_position,
        'data-loading'          : CONFIG.giscus.loading
      },
      parentNode: document.querySelector('.giscus-container')
    }));
});
</script>

</body>
</html>
